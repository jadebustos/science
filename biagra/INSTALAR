#
# Script para la instalacion de las librerias B.I.A.G.R.A
# 	  BIbliotecA de proGRamacion cientificA
# 	       Jose Angel de Bustos Perez
#

# Compilador predeterminado
CC=gcc

# Extension de los ficheros objeto
EXTOBJ=o

# Nombre de la biblioteca
BIBLIOTECA=libbiagra.a

case $1 in
	
	estatica) # Instalar biblioteca estatica

	echo "INSTALACION DE LAS BIBLIOTECAS B.I.A.G.R.A. ESTATICAS"
	
	# Creacion del directorio /usr/include/biagra









	for i in *.h

	do

		# Copia los ficheros de cabezera en /usr/include/biagra

		cp $i /usr/include/biagra

	done

	# Compilar los fuentes

	for i in *.c

	do		
		FICHERO=$(basename $i c)

		# FICHEROOBJ nombre de los ficheros objeto

		FICHEROOBJ=$FICHERO$EXTOBJ

		echo "Compilando $i ..."
		$CC -c $i -o $FICHEROOBJ

	done

	# Creando la biblioteca

	echo "Creando biblioteca estatica $BIBLIOTECA ..."

	for i in *.o

	do

	ar cru $BIBLIOTECA $i
	rm $i

	done

	# Creando el indice en la biblioteca

	ranlib $BIBLIOTECA

        # Mueve la biblioteca a /usr/lib

	mv $BIBLIOTECA /usr/lib/$BIBLIOTECA;;

	elf)

	echo "No seas impaciente.";;

esac

